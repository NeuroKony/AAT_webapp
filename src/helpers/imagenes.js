import AttrCP1 from '../assets/images/study/Atr_CP/131_AP_0234.jpg'
import AttrCP2 from '../assets/images/study/Atr_CP/132_AP_0032.jpg'
import AttrCP3 from '../assets/images/study/Atr_CP/133_AP_0304.jpg'
import AttrCP4 from '../assets/images/study/Atr_CP/134_AP_0286.jpg'
import AttrCP5 from '../assets/images/study/Atr_CP/135_AP_0317.jpg'
import AttrCP6 from '../assets/images/study/Atr_CP/136_AP_0283.jpg'
import AttrCP7 from '../assets/images/study/Atr_CP/137_AP_0337.jpg'
import AttrCP8 from '../assets/images/study/Atr_CP/138_AP_0061.jpg'
import AttrCP9 from '../assets/images/study/Atr_CP/139_AP_0174.jpg'
import AttrCP10 from '../assets/images/study/Atr_CP/140_AP_0398.jpg'
import AttrCP11 from '../assets/images/study/Atr_CP/141_AP_0086.jpg'
import AttrCP12 from '../assets/images/study/Atr_CP/142_AP_0143.jpg'
import AttrCP13 from '../assets/images/study/Atr_CP/143_AP_0145.jpg'
import AttrCP14 from '../assets/images/study/Atr_CP/144_AP_0028.jpg'
import AttrCP15 from '../assets/images/study/Atr_CP/145_AP_0033.jpg'
import AttrCP16 from '../assets/images/study/Atr_CP/146_AP_0083.jpg'
import AttrCP17 from '../assets/images/study/Atr_CP/147_AP_0012.jpg'
import AttrCP18 from '../assets/images/study/Atr_CP/148_AP_0287.jpg'
import AttrCP19 from '../assets/images/study/Atr_CP/149_AP_0564.jpg'
import AttrCP20 from '../assets/images/study/Atr_CP/150_AP_0049.jpg'

import AttrSP1 from '../assets/images/study/Atr_SP/01_A_0234.jpg'
import AttrSP2 from '../assets/images/study/Atr_SP/010_A_0398.jpg'
import AttrSP3 from '../assets/images/study/Atr_SP/011_A_0086.jpg'
import AttrSP4 from '../assets/images/study/Atr_SP/012_A_0143.jpg'
import AttrSP5 from '../assets/images/study/Atr_SP/013_A_0145.jpg'
import AttrSP6 from '../assets/images/study/Atr_SP/014_A_0028.jpg'
import AttrSP7 from '../assets/images/study/Atr_SP/015_A_0033.jpg'
import AttrSP8 from '../assets/images/study/Atr_SP/016_A_0083.jpg'
import AttrSP9 from '../assets/images/study/Atr_SP/017_A_0012.jpg'
import AttrSP10 from '../assets/images/study/Atr_SP/018_A_0287.jpg'
import AttrSP11 from '../assets/images/study/Atr_SP/019_A_0564.jpg'
import AttrSP12 from '../assets/images/study/Atr_SP/02_A_0032.jpg'
import AttrSP13 from '../assets/images/study/Atr_SP/020_A_0049.jpg'
import AttrSP14 from '../assets/images/study/Atr_SP/03_A_0304.jpg'
import AttrSP15 from '../assets/images/study/Atr_SP/04_A_0286.jpg'
import AttrSP16 from '../assets/images/study/Atr_SP/05_A_0317.jpg'
import AttrSP17 from '../assets/images/study/Atr_SP/06_A_0283.jpg'
import AttrSP18 from '../assets/images/study/Atr_SP/07_A_0337.jpg'
import AttrSP19 from '../assets/images/study/Atr_SP/08_A_0061.jpg'
import AttrSP20 from '../assets/images/study/Atr_SP/09_A_0174.jpg'

import NeuCP1 from '../assets/images/study/Neu_CP/191_NP_0336.jpg'
import NeuCP2 from '../assets/images/study/Neu_CP/192_NP_0278.jpg'
import NeuCP3 from '../assets/images/study/Neu_CP/193_NP_0226.jpg'
import NeuCP4 from '../assets/images/study/Neu_CP/194_NP_0261.jpg'
import NeuCP5 from '../assets/images/study/Neu_CP/195_NP_0261.jpg'
import NeuCP6 from '../assets/images/study/Neu_CP/196_NP_0273.jpg'
import NeuCP7 from '../assets/images/study/Neu_CP/197_NP_0449.jpg'
import NeuCP8 from '../assets/images/study/Neu_CP/198_NP_0335.jpg'
import NeuCP9 from '../assets/images/study/Neu_CP/199_NP_0451.jpg'
import NeuCP10 from '../assets/images/study/Neu_CP/200_NP_0008.jpg'
import NeuCP11 from '../assets/images/study/Neu_CP/201_NP_0433.jpg'
import NeuCP12 from '../assets/images/study/Neu_CP/202_NP_0271.jpg'
import NeuCP13 from '../assets/images/study/Neu_CP/203_NP_0434.jpg'
import NeuCP14 from '../assets/images/study/Neu_CP/204_NP_0208.jpg'
import NeuCP15 from '../assets/images/study/Neu_CP/205_NP_0368.jpg'
import NeuCP16 from '../assets/images/study/Neu_CP/206_NP_0259.jpg'
import NeuCP17 from '../assets/images/study/Neu_CP/207_NP_0367.jpg'
import NeuCP18 from '../assets/images/study/Neu_CP/208_NP_0418.jpg'
import NeuCP19 from '../assets/images/study/Neu_CP/209_NP_0244.jpg'
import NeuCP20 from '../assets/images/study/Neu_CP/210_NP_0435.jpg'

import NeuSP1 from '../assets/images/study/Neu_SP/71_N_0336.jpg'
import NeuSP2 from '../assets/images/study/Neu_SP/72_N_0278.jpg'
import NeuSP3 from '../assets/images/study/Neu_SP/73_N_0226.jpg'
import NeuSP4 from '../assets/images/study/Neu_SP/74_N_0268.jpg'
import NeuSP5 from '../assets/images/study/Neu_SP/75_N_0268.jpg'
import NeuSP6 from '../assets/images/study/Neu_SP/76_N_0273.jpg'
import NeuSP7 from '../assets/images/study/Neu_SP/77_N_0449.jpg'
import NeuSP8 from '../assets/images/study/Neu_SP/78_N_0335.jpg'
import NeuSP9 from '../assets/images/study/Neu_SP/79_N_0451.jpg'
import NeuSP10 from '../assets/images/study/Neu_SP/80_N_0008.jpg'
import NeuSP11 from '../assets/images/study/Neu_SP/81_N_0433.jpg'
import NeuSP12 from '../assets/images/study/Neu_SP/82_N_0271.jpg'
import NeuSP13 from '../assets/images/study/Neu_SP/83_N_0434.jpg'
import NeuSP14 from '../assets/images/study/Neu_SP/84_N_0208.jpg'
import NeuSP15 from '../assets/images/study/Neu_SP/85_N_0343.jpg'
import NeuSP16 from '../assets/images/study/Neu_SP/86_N_0259.jpg'
import NeuSP17 from '../assets/images/study/Neu_SP/87_N_0367.jpg'
import NeuSP18 from '../assets/images/study/Neu_SP/88_N_0418.jpg'
import NeuSP19 from '../assets/images/study/Neu_SP/89_N_0244.jpg'
import NeuSP20 from '../assets/images/study/Neu_SP/90_N_0435.jpg'

import PracticaSP1 from '../assets/images/study/P/P10_1181.png'
import PracticaSP2 from '../assets/images/study/P/P1_1074.png'
import PracticaSP3 from '../assets/images/study/P/P2_0890.png'
import PracticaSP4 from '../assets/images/study/P/P3_1310.png'
import PracticaSP5 from '../assets/images/study/P/P4_0862.png'
import PracticaSP6 from '../assets/images/study/P/P5_1241.png'
import PracticaSP7 from '../assets/images/study/P/P6_1075.png'
import PracticaSP8 from '../assets/images/study/P/P7_1018.png'
import PracticaSP9 from '../assets/images/study/P/P8_1171.png'
import PracticaSP10 from '../assets/images/study/P/P9_0892.png'

import PracticaCP1 from '../assets/images/study/PP/PP10_1181.png'
import PracticaCP2 from '../assets/images/study/PP/PP1_1074.png'
import PracticaCP3 from '../assets/images/study/PP/PP2_0890.png'
import PracticaCP4 from '../assets/images/study/PP/PP3_1310.png'
import PracticaCP5 from '../assets/images/study/PP/PP4_0862.png'
import PracticaCP6 from '../assets/images/study/PP/PP5_1241.png'
import PracticaCP7 from '../assets/images/study/PP/PP6_1075.png'
import PracticaCP8 from '../assets/images/study/PP/PP7_1018.png'
import PracticaCP9 from '../assets/images/study/PP/PP8_1171.png'
import PracticaCP10 from '../assets/images/study/PP/PP9_0892.png'

import _ from 'lodash'

export const imagenesAtrCP = [
  AttrCP1,
  AttrCP2,
  AttrCP3,
  AttrCP4,
  AttrCP5,
  AttrCP6,
  AttrCP7,
  AttrCP8,
  AttrCP9,
  AttrCP10,
  AttrCP11,
  AttrCP12,
  AttrCP13,
  AttrCP14,
  AttrCP15,
  AttrCP16,
  AttrCP17,
  AttrCP18,
  AttrCP19,
  AttrCP20,
]

export const imagenesAtrSP = [
  AttrSP1,
  AttrSP2,
  AttrSP3,
  AttrSP4,
  AttrSP5,
  AttrSP6,
  AttrSP7,
  AttrSP8,
  AttrSP9,
  AttrSP10,
  AttrSP11,
  AttrSP12,
  AttrSP13,
  AttrSP14,
  AttrSP15,
  AttrSP16,
  AttrSP17,
  AttrSP18,
  AttrSP19,
  AttrSP20,
]

export const imagenesNeuCP = [
  NeuCP1,
  NeuCP2,
  NeuCP3,
  NeuCP4,
  NeuCP5,
  NeuCP6,
  NeuCP7,
  NeuCP8,
  NeuCP9,
  NeuCP10,
  NeuCP11,
  NeuCP12,
  NeuCP13,
  NeuCP14,
  NeuCP15,
  NeuCP16,
  NeuCP17,
  NeuCP18,
  NeuCP19,
  NeuCP20,
]

export const imagenesNeuSP = [
  NeuSP1,
  NeuSP2,
  NeuSP3,
  NeuSP4,
  NeuSP5,
  NeuSP6,
  NeuSP7,
  NeuSP8,
  NeuSP9,
  NeuSP10,
  NeuSP11,
  NeuSP12,
  NeuSP13,
  NeuSP14,
  NeuSP15,
  NeuSP16,
  NeuSP17,
  NeuSP18,
  NeuSP19,
  NeuSP20,
]

export const imagenesPracticaSP = [
  PracticaSP1,
  PracticaSP2,
  PracticaSP3,
  PracticaSP4,
  PracticaSP5,
  PracticaSP6,
  PracticaSP7,
  PracticaSP8,
  PracticaSP9,
  PracticaSP10,
]

export const imagenesPracticaCP = [
  PracticaCP1,
  PracticaCP2,
  PracticaCP3,
  PracticaCP4,
  PracticaCP5,
  PracticaCP6,
  PracticaCP7,
  PracticaCP8,
  PracticaCP9,
  PracticaCP10,
]

export const crearSecuenciaExposicion = conPublicidad => {
  if (conPublicidad) {
    return _.shuffle([...imagenesAtrCP, ...imagenesNeuCP])
  }
  else {
    return _.shuffle([...imagenesAtrSP, ...imagenesNeuSP])
  }
}

const crearSecuenciaDeRepeticiones = (total, maxRep) => {
  const secuencia = []
  let conteo = 0
  while (conteo < total) {
    if (total - conteo < maxRep) {
      secuencia.push(total - conteo)
      break
    }
    const elemento = Math.ceil(Math.random() * maxRep)
    secuencia.push(elemento)
    conteo += elemento
  }
  return secuencia
}

const crearWrapperCue = (imagen, cue, neutra) => ({
  //id: imagen.substring(14, imagen.indexOf('.')),
  id: imagen.substring(15, imagen.indexOf('.', imagen.indexOf('.') + 1)),
  cue,
  imagen,
  neutra
})

export const crearSecuenciaAAT2 = conPublicidad => {
  const imagenesAttrCueT = _.shuffle((conPublicidad ? imagenesAtrCP : imagenesAtrSP)).map(img => crearWrapperCue(img, true, false))
  const imagenesAttrCueF = _.shuffle((conPublicidad ? imagenesAtrCP : imagenesAtrSP)).map(img => crearWrapperCue(img, false, false))
  const imagenesNeutCueT = _.shuffle((conPublicidad ? imagenesNeuCP : imagenesNeuSP)).map(img => crearWrapperCue(img, true, true))
  const imagenesNeutCueF = _.shuffle((conPublicidad ? imagenesNeuCP : imagenesNeuSP)).map(img => crearWrapperCue(img, false, true))
  let secuencia
  while (true) {
    secuencia = _.shuffle([
      ...imagenesAttrCueT,
      ...imagenesAttrCueF,
      ...imagenesNeutCueT,
      ...imagenesNeutCueF,
    ])
    let reps = 0
    let muchasReps = false
    for (let i = 1; i < secuencia.length; i++) {
      if (secuencia[i - 1].cue !== secuencia[i].cue) {
        reps = 1
      }
      else {
        reps++
        if (reps > 3) {
          muchasReps = true
          break
        }
      }
    }
    if (!muchasReps) {
      break
    }
  }
  return secuencia
}

export const crearSecuenciaCuestionario = conPublicidad => {
  const imagenesAttr = _.shuffle((conPublicidad ? imagenesAtrCP : imagenesAtrSP)).map(img => crearWrapperCue(img, true, false))
  const imagenesNeut = _.shuffle((conPublicidad ? imagenesNeuCP : imagenesNeuSP)).map(img => crearWrapperCue(img, true, true))
  return _.shuffle([...imagenesAttr, ...imagenesNeut])
}

export const crearSecuenciaAAT = conPublicidad => {
  let imagenesPorCategoria = imagenesAtrCP.length
  let maxRep = 3
  const imagenesAttr = _.sampleSize((conPublicidad ? imagenesAtrCP : imagenesAtrSP), imagenesPorCategoria)
  const imagenesNeut = _.sampleSize((conPublicidad ? imagenesNeuCP : imagenesNeuSP), imagenesPorCategoria)
  const secuenciaAttr = crearSecuenciaDeRepeticiones(imagenesPorCategoria, maxRep)
  const secuenciaNeut = _.shuffle(secuenciaAttr)
  const secuenciaCuesAttr = crearSecuenciaDeRepeticiones(imagenesPorCategoria, maxRep)
  const secuenciaCuesNeut = _.shuffle(secuenciaCuesAttr).map(x => -x)
  const secuenciaCues = _.flatten(_.zip(secuenciaCuesAttr, secuenciaCuesNeut)).reduce((arr, v) => [...arr, ...Array(Math.abs(v)).fill(v)], [])
  const secuencia = []
  for (let i = 0, indiceAttr = 0, indiceNeut = 0, indiceCues = 0; i < secuenciaAttr.length; i++) {
    for (let j = 0; j < secuenciaAttr[i]; j++) {
      secuencia.push({
        id: imagenesAttr[indiceAttr].substring(14, imagenesAttr[indiceAttr].indexOf('.')),
        cue: secuenciaCues[indiceCues++] > 0,
        imagen: imagenesAttr[indiceAttr++],
        neutra: false
      })
    }
    for (let j = 0; j < secuenciaNeut[i]; j++) {
      secuencia.push({
        id: imagenesNeut[indiceNeut].substring(14, imagenesNeut[indiceNeut].indexOf('.')),
        cue: secuenciaCues[indiceCues++] > 0,
        imagen: imagenesNeut[indiceNeut++],
        neutra: true
      })
    }
  }
  return secuencia
}

export const crearSecuenciaPractica = (conPublicidad) => {
  return (conPublicidad ? imagenesPracticaCP : imagenesPracticaSP).map(img => ({
    //id: img.substring(14, img.indexOf('.')),
    id: img.substring(15, img.indexOf('.', img.indexOf('.') + 1)),
    cue: Math.random() > .5,
    imagen: img,
    neutra: true
  }))
}